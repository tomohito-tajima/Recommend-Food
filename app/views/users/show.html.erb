<main>
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <div class="d-flex justify-content-center">
          <h4 style="border: solid; border-color: #000080; text-align: center; padding: 5px 20px; margin: 20px 0;">
            <!--カレントユーザが自身の詳細を見ている時は「マイページ」-->
            <% if user_signed_in? && current_user.id.to_s == params[:id] %>
              マイページ
            <!--他のユーザのマイページを見るときは「○○さんのマイページ-->
            <% else %>
              <%= @user.name %>さんのマイページ
            <% end %>
          </h4>
        </div>

        <div>
          <%= attachment_image_tag @user, :profile, :fill, 200, 100, format: 'jpeg' %>
        </div>

        <table class="table" align="center">
          <tbody>
            <tr>
              <td>名前</td>
              <td><%= @user.name %></td>
            </tr>

            <tr>
              <td>好きな食べ物</td>
              <td><%= @user.favorited_food %></td>
            </tr>

            <tr>
              <td>自己紹介</td>
              <td><%= @user.introduction %></td>
            </tr>

            <tr>
              <td>フォロー数： <%= @user.followings.count %></td>
              <td>フォロワー数：<%= @user.followers.count %></td>
            </tr>

            <tr>
              <td><%= link_to "フォロー一覧", user_followings_path(@user.id) %></td>
              <td><%= link_to "フォロワー一覧", user_followers_path(@user.id) %></td>
            </tr>
          </tbody>
        </table>

        <h4 style="text-align: center; margin: 20px auto; text-center" >
          <%= link_to "マイページを変更", edit_user_path(@user.id), class: "btn btn-block btn-sm btn-success" %>
        </h4>
      </div>

      <div class="col-md-7 offset-md-1">
        <div class="d-flex justify-content-center">
          <!--カレントユーザがログイン時のみ表示させる-->
          <% if user_signed_in? && current_user.id.to_s == params[:id] %>
            <h4 style="text-align: center; margin: 20px auto;">
              <%= link_to "お気に入りFood一覧", edit_user_path(@user.id), class: "btn btn-block btn-sm btn-warning" %>
            </h4>

            <h4 style="text-align: center; margin: 20px auto;">
              <%= link_to "新規投稿する", new_food_path, class: "btn btn-block btn-sm btn-success" %>
            </h4>
          <% end %>
        </div>

        <div class="d-flex justify-content-center">
          <!--カレントユーザなら「あなた」、他ユーザなら「○○さんの投稿一覧」-->
          <!--他のユーザが見たときのみ、フォローボタンを追加-->
          <% if user_signed_in? && current_user.id.to_s == params[:id] %>
            <div>
              <h4 style="border: solid; border-color: #000000;">あなたが投稿した一覧</h4>
            </div>
          <% else %>
            <div>
              <h4 style="border: solid; border-color: #000000;"><%= @user.name %>さんが投稿した一覧</h4>
            </div>

            <div>
              <% if current_user.following?(@user) %>
                <%= link_to "フォロー外す", user_relationships_path(@user.id), method: :delete, class: "btn btn-block btn-sm btn-danger" %>
              <% else %>
                <%= link_to "フォローする", user_relationships_path(@user.id), method: :post, class: "btn btn-block btn-sm btn-primary" %>
              <% end %>
            </div>
          <% end %>
        </div>

        <div>
          <table class="table table-hover table-bordered">
              <thead>
                <tr>
                  <th></th>
                  <th>お店名</th>
                  <th>レビュー</th>
                  <th></th>
                  <th></th>
                </tr>
              </thead>

            <% @foods.each do |food| %>
              <tbody>
                <tr>
                  <td><%= attachment_image_tag food, :image, :fill, 50, 50, format: 'jpeg' %></td>
                  <td><%= food.name %></td>
                  <td>レビュー</td>
                  <td>♥o<%= fod.likes.count %></td>
                  <td><%= link_to "詳細", food_path(food.id), class: "btn btn-block btn-sm btn-primary" %></td>
                </tr>
              </tbody>
            <% end %>
          </table>
        </div>
      </div>
    </div>
  </div>
</main>

